<html>
    <head>
        <script>
            top.modules = {};
            function srcToModule(src) {
                const parts = src.split('/');
                const module = './' + parts[parts.length - 1].split('.js')[0];
                return module;
            }
            function require(src) {
                return top.modules[srcToModule(src)].exports;
            }
            async function load(src) {
                const res = await fetch(src);
                let js = await res.text();
                const script = document.createElement('script');
                script.textContent = `
                top.modules['${srcToModule(src)}'] = (function(){
                    const module = {};
                    ${js}
                    return module;
                }());
                `;
                document.head.appendChild(script);
            }
        </script>
        <script src="https://cdn.jsdelivr.net/npm/treeify/treeify.js"></script>
        <script>
            // load walker
            (async function(){
                await load('../../src/options.js');
                await load('../../src/properties.js');
                await load('../../src/ignores.js');
                await load('../../src/walk.js');
                await load('./tree.js');
            }());
        </script>
        <script></script>
        <script>
            // load demo
            function start(){
                const demo = location.search.substr(1);
                const src = './examples/' + demo + '.js';
                const script = document.createElement('script');
                script.src = src;
                document.head.appendChild(script);
            }
            setTimeout(start, 100);
        </script>
    </head>
    <body>
        <b>demos:</b>

        <li><a href="?attached-dom-node">attached-dom-node</a></li>
        <li><a href="?dom-node-event-target">dom-node-event-target</a></li>
        <li><a href="?new-unattached-dom-node-with-attribute">new-unattached-dom-node-with-attribute</a></li>
        <li><a href="?new-unattached-dom-node-with-children">new-unattached-dom-node-with-children</a></li>
        <li><a href="?new-unattached-dom-node">new-unattached-dom-node</a></li>

        <br>

        <b>nesting level:</b> <input style="width: 30px" id="limit">

        <br>

        <script>
            limit.value = localStorage.limit || 5;
            limit.onchange = () => {
                localStorage.limit = limit.value;
            }
        </script>
    </body>
</html>